worker:
  id: knowledge-curator
  name: "Knowledge Curator"
  description: "Process learnings, update knowledge bases, maintain documentation"
  type: CodeWorker
  version: "1.0"
  team: dev-team

execution:
  mode: on_demand
  max_runtime: 10m
  retry_attempts: 1
  spawn_method: task_tool

context:
  base:
    - workers/public/dev-team/knowledge-curator/skills/
    - knowledge/public/dev-team/
    - knowledge/public/workers/
  dynamic:
    - pattern: "projects/{project}/learnings/"
      when: "task.has_project"
    - pattern: "workers/{worker}/knowledge/"
      when: "task.has_worker"
    - pattern: "companies/{company}/knowledge/"
      when: "task.has_company"
  exclude:
    - node_modules/
    - dist/
    - "*.log"
    - repos/

skills:
  - id: process-learnings
    file: skills/process-learnings.md
  - id: update-patterns
    file: skills/update-patterns.md
  - id: curate-troubleshooting
    file: skills/curate-troubleshooting.md
  - id: sync-documentation
    file: skills/sync-documentation.md

verification:
  post_execute:
    - check: markdown_lint
      command: npx markdownlint-cli2 "**/*.md"
  approval_required: true

external_skills:
  - vercel/writing-clearly-and-concisely

mcp:
  server:
    command: node
    args: [dist/mcp-server.js]
  tools:
    - process_learnings
    - update_patterns
    - curate_troubleshooting
    - sync_documentation
    - search_knowledge

# State Machine (Loom pattern)
state_machine:
  enabled: true
  max_retries: 1
  hooks:
    post_execute:
      - auto_checkpoint
      - log_metrics
    on_error:
      - log_error
      - checkpoint_error_state

reporting:
  on_complete:
    - log_updates
  metrics:
    - patterns_added
    - docs_updated
